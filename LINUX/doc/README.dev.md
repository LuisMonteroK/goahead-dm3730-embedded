开发说明 {#dev}
==========
本项目是web服务器的后端程序.与前端www目录共同使用.用户终端的维护.
git可以查看版本历史.

基于 goahead2.5.0 服务器开发.

###交互
与客户端重度使用 POST 方法传递,前端重度使用 jQuery 的 ajax 与后端交互.

接收客户端发来的数据主要

1. 使用 goahead 自身的 websGetVal 函数解析字符串.如接收系统参数,表计参数这些.
2. 直接就是纯字符串.如日志文件,监视端口配置文件这些.

发送给前端的数据方式:

1. (推荐)JSON.如系统参数的发送.
2. (按需求)直接字符串.如日志文件,监视端口配置文件之类.
3. (不推荐)html格式的字符串.如表计参数,串口方案这类需要填写表格的.目前这个方式占多数.

与终端各个文件交互.包括各种配置文件(conf/)参数文件(para/)和数据文件(nond/).

与终端都是通过读写文件实现交互的.效率低,有锁的潜在危险.但是实现简单.易于解耦.

###配置文件
配置文件一般位于终端 `/mnt/nor/conf` 目录下.其中 `/mnt/nor/conf/goahead.conf` 为后端服务器程序默认的配置文件.该路径由 `conf.h` 硬编码.此配置文件中包含指示前端根目录的项 `wwwroot` .

其他配置文件一般以特定的二进制格式保存.格式参考主程序软代码或 `goahead/doc` 目录下的文档.
配置文件目录抽象成为一个数据库,各个文件抽象成表.所有配置文件操作均参考数据库操作思想实现.
系统参数可以影响其他相关参数的"增" "删"."查"功能仅实现对索引的简单编译.业务需要较为复杂的"查询"功能."改"功能实现.配合简单的"查询"可以满足基本要求.

###参数文件
参数文件一般位于终端 `mnt/nor/para` 目录下.与抄表/菜单等应用程序共用/交互.

参数文件主要在初始化中读取.然后驻留内存随时需要使用.参数的"再初始化"功能在没有配合终端重启的情况下意义不大.会引起二义性,即客户浏览器显示已经修改,但是终端"采样程序"和"菜单"程序并没有同步"再初始化".所以只有这两个程序都重启后,参数的显示和设置才变得有意义.

###数据文件
数据的读取(写数据是不符合逻辑的)主要以读取指定的数据文件实现.数据文件是由抄表主程序保存生成的.格式参考主程序源代码或 `/doc` 下文档.应以主程序为准.

数据读取仿照主站采集的思路实现.可以看成一个极简的主站实现.目前只要是实现历史数据的手动上招.因为本服务器目前的使用对象主要针对安装维护人员.所以数据部分实现从简.

